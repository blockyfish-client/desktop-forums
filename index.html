<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <main>
        <h1>Hello World</h1>
    </main>
    <fieldset>
        <legend>Effect</legend>
        <button onclick="setEffect(3)">Acrylic</button>
        <button onclick="setEffect(2)">Mica</button>
        <button onclick="setEffect(4)">Mica Tabbed</button>
    </fieldset>
    <fieldset>
        <legend>Theme</legend>
        <button onclick="setTheme(0)">Auto</button>
        <button onclick="setTheme(1)">Dark</button>
        <button onclick="setTheme(2)">Light</button>
    </fieldset>
    <fieldset>
        <legend>Corner</legend>
        <button onclick="setParams(5, 2)">Round</button>
        <button onclick="setParams(5, 3)">Small Round</button>
        <button onclick="setParams(5, 1)">Square</button>
    </fieldset>
    <fieldset>
        <legend>Window Color</legend>

        <input type="color" id="colorBorder" name="colorBorder" value="#e6e6e6">
        <label for="colorBorder">Border</label>

        <input type="color" id="colorCaption" name="colorCaption" value="#e6e6e6">
        <label for="colorCaption">Caption</label>

        <input type="color" id="colorTitle" name="colorTitle" value="#e6e6e6">
        <label for="colorTitle">Title</label>
    </fieldset>
    <script>
        const { ipcRenderer } = require('electron');

const darkTheme = document.createElement('link');
darkTheme.rel = 'stylesheet';
darkTheme.href = 'css/dark.css';

function setTheme(theme) {
    ipcRenderer.send('theme', theme);

    if (theme == 1)
        document.head.appendChild(darkTheme);

    else
        document.head.removeChild(darkTheme);
}

function setEffect(effect) {
    ipcRenderer.send('effect', effect);
}

function setParams(params, value) {
    ipcRenderer.send('params', params, value);
}

function htmlToColor(color) {
    let r = color.slice(0, 2);
    let g = color.slice(2, 4);
    let b = color.slice(4, 6);

    return parseInt("0x" + b + g + r);
}

window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
    document.head[event.matches ? 'appendChild' : 'removeChild'](darkTheme);
});

window.onload = () => {
    const colorBorder = document.getElementById('colorBorder');
    const colorCaption = document.getElementById('colorCaption');
    const colorTitle = document.getElementById('colorTitle');

    colorBorder.addEventListener('input', () => {
        let color = htmlToColor(colorBorder.value.slice(1));

        setParams(6, color);
    });

    colorCaption.addEventListener('input', () => {
        let color = htmlToColor(colorCaption.value.slice(1));

        setParams(7, color);
    });

    colorTitle.addEventListener('input', () => {
        let color = htmlToColor(colorTitle.value.slice(1));

        setParams(8, color);
    });
}
    </script>
</body>
</html>